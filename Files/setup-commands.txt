============================================
  OpenClaw Module 02 — Setup Commands
  Copy and paste these into the Ubuntu terminal
============================================

To paste in the Ubuntu terminal: Ctrl+Shift+V  OR  right-click
To copy from the terminal: select text, then Ctrl+Shift+C  OR  right-click > Copy

Run each command one at a time. Wait for it to finish before running the next one.


============================
  UBUNTU TERMINAL COMMANDS
  (Open Terminal from the dock or press Ctrl+Alt+T)
============================


STEP 1: Update Ubuntu
--------------------------------------------

sudo apt update && sudo apt upgrade -y

(This downloads and installs all available updates.)
(First run after install may take 5-10 minutes. Enter your password when asked.)
(Password won't show when you type — no dots, no stars. That's normal!)


STEP 2: Install essential tools
--------------------------------------------

sudo apt install -y git curl wget build-essential

(These are developer tools that OpenClaw and Node.js need.)


STEP 3: Install nvm (Node Version Manager)
--------------------------------------------

curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.4/install.sh | bash

(Then close the terminal and reopen it — this loads nvm into your session.)
(Reopen: click Terminal in the dock, or press Ctrl+Alt+T)

(Check it works:)

nvm --version

(Should show: 0.40.4)


STEP 4: Install Node.js 22
--------------------------------------------

nvm install 22
nvm alias default 22

(Check it works:)

node --version
npm --version

(Should show: v22.x.x and 10.x.x or 11.x.x)


STEP 5: Power settings — disable auto-suspend
--------------------------------------------

(GUI — no commands needed)
1. Open Settings (click the gear icon in the top-right system menu)
2. Go to Power
3. Set "Automatic Suspend" to OFF (for both "On Battery Power" and "Plugged In")
4. Set "Screen Blank" to Never


STEP 6: Power settings — lid close behavior
--------------------------------------------

sudo sed -i 's/#HandleLidSwitch=suspend/HandleLidSwitch=ignore/' /etc/systemd/logind.conf
sudo sed -i 's/#HandleLidSwitchExternalPower=suspend/HandleLidSwitchExternalPower=ignore/' /etc/systemd/logind.conf
sudo systemctl restart systemd-logind

(This makes closing the laptop lid do nothing — the laptop stays running.)
(WARNING: This will log you out of your current session. Save any open work first.)


STEP 7: Verify everything works
--------------------------------------------

systemctl is-system-running
node --version
npm --version
git --version
curl --version | head -1
pwd

(All should return valid output.)
(systemctl should say "running")
(pwd should show /home/openclaw)


STEP 8: Optional — Install Tailscale (remote access)
--------------------------------------------

(Skip if you'll only use this laptop locally.)

curl -fsSL https://tailscale.com/install.sh | sh
sudo tailscale up

(This gives you a URL — open it in your browser to authorize the device.)

(Verify:)

tailscale status

(You should see your devices listed with Tailscale IPs like 100.x.x.x)

(Also install Tailscale on your phone/main computer from https://tailscale.com/download)
(Sign in with the same account.)

Access your OpenClaw later:
  - From this laptop: http://127.0.0.1:18789/
  - From your phone (on Tailscale): http://100.x.x.x:18789/
  - From everywhere else: no access (secure by default)


============================================
  MODULE 03 — Installing OpenClaw
  (Everything below happens in Ubuntu terminal)
============================================


STEP 9: Install OpenClaw
--------------------------------------------

curl -fsSL https://openclaw.ai/install.sh | bash

(Wait for "Installation complete!" You will see npm WARN deprecated messages — ignore these, they are harmless.)


STEP 10: Run the onboarding wizard
--------------------------------------------

(The install may not add openclaw to your PATH. If "openclaw" gives "command not found", use npx instead:)

npx openclaw onboard --install-daemon

(If it says "Need to install the following packages" — type y and press Enter. This is normal.)
(Expect 1-3 minutes of downloading before the wizard appears. Be patient — it's not stuck.)
(If the terminal freezes after download, close the terminal and reopen it, then run the npx command again.)

>>> IMPORTANT: When asked "Quick Setup" or "Manual" — choose MANUAL <<<
(Quick Setup skips questions we need to configure. Choose Manual so you see every option.)

(This starts an interactive wizard. Here's what to choose for each question:)

  Q1  Gateway type:          Local Gateway
  Q2  Workspace directory:   Accept default (~/.openclaw) — press Enter
  Q3  AI provider:           Anthropic (or your choice)
  Q4  API key:               Paste it (see below)
  Q5  Model:                 claude-opus-4-6
  Q6  Gateway port:          Accept default (18789) — press Enter
  Q7  Gateway bind:          Loopback
  Q8  Tailscale exposure:    Off
  Q9  Gateway token:         Leave blank (auto-generate) — press Enter
  Q10 Chat channels:         Skip for now
  Q11 Skills:                Skip all — press Enter
  Q12 Hooks:                 Enable BOOT.md and session memory (spacebar to toggle)
  Q13 Service runtime:       Node.js — press Enter
  Q14 Install as service:    Y — press Enter

>>> IF THE WIZARD SAYS "Gateway service already installed" <<<
Choose RESTART — it's already installed, just needs a fresh start.

>>> WHEN ASKED "How do you want to hatch your bot?" <<<
Choose "do this later" — we will test the TUI ourselves after setup.

>>> WHEN ASKED "Enable bash shell completion?" <<<
Choose Yes.

>>> PASTING YOUR API KEY (for Q4) <<<
1. Copy API key from console.anthropic.com
2. Open a text editor (Text Editor app, or type: gedit) and paste it there first
3. Verify it's ONE line starting with sk-ant-
4. Select all (Ctrl+A), copy (Ctrl+C)
5. Paste into terminal with Ctrl+Shift+V or right-click

>>> TRANSFERRING YOUR API KEY FROM ANOTHER DEVICE <<<
If you created your API key on your phone or another computer:
- Easiest: email it to yourself, open the email on this laptop's browser, copy it
- Tailscale: use Taildrop (right-click file > "Send with Tailscale..." > pick this laptop)

>>> SAVE YOUR GATEWAY TOKEN <<<
The wizard displays a gateway token at the end. Save it immediately!
You need it to access the dashboard. If you lose it, look in:
cat ~/.openclaw/openclaw.json
(Search for the "token" field in the gateway section.)


STEP 11: Approve device pairing (if needed)
--------------------------------------------

(After onboarding, the TUI may require device pairing before it can connect.)
(If you see "pairing required" when trying to use the TUI or dashboard:)

npx openclaw devices list --json

(Find the "requestId" for the pending entry — a long string of letters and numbers.)
(Then approve it:)

npx openclaw devices approve YOUR-REQUEST-ID-HERE

(Replace YOUR-REQUEST-ID-HERE with the actual requestId from the JSON output.)
(After approving, try the TUI again — it should connect.)


STEP 12: Install QMD (do this immediately)
--------------------------------------------

npx clawhub install qmd

(If it says "Need to install the following packages: clawhub" — type y and press Enter.)
(If it asks for the slug and "qmd" doesn't work, try: npx clawhub search qmd — then use the slug it shows.)

npx openclaw gateway restart

(QMD is a search engine for your agent's memory — saves tokens from day one.)


STEP 13: Verify the installation
--------------------------------------------

npx openclaw status
npx openclaw doctor
npx openclaw security audit --deep --fix

(status should show "Running", doctor should pass, audit fixes file permissions.)
(If doctor asks to update config or restart, say Yes.)


STEP 14: Test the dashboard (optional)
--------------------------------------------

npx openclaw dashboard --no-open

(It prints a URL with your token. Copy the FULL URL and paste it into your browser.)
(Use http:// NOT https:// — the S will cause an error.)
(If it says "auth failed" or "connect failed", skip it — use the TUI instead.)


STEP 15: Test the TUI (first chat)
--------------------------------------------

npx openclaw tui

(If you see "pairing required" — go back to STEP 11 and approve the device.)
(If you see "gateway connected" — you're in!)
(Type a short greeting and press Enter. If the AI responds, it works!)
(Type /exit or press Ctrl+C to leave.)


STEP 16: Verify the daemon
--------------------------------------------

npx openclaw gateway status

(Should show: Active: active (running))

(Close the terminal completely, wait 10 seconds, then reopen it.
Run: npx openclaw tui
If it connects, the daemon kept running in the background — that's the goal.)


============================
  USEFUL COMMANDS (reference)
============================


--- Gateway (daemon) ---

npx openclaw gateway start       # Start the daemon
npx openclaw gateway stop        # Stop the daemon
npx openclaw gateway restart     # Restart after config changes
npx openclaw gateway status      # Check if daemon is running
npx openclaw logs                # View daemon logs
npx openclaw gateway install     # Reinstall the daemon service


--- Chat & Dashboard ---

npx openclaw tui                 # Chat with your agent (primary interface)
npx openclaw dashboard --no-open # Get a tokenized URL for the browser dashboard


--- Device Management ---

npx openclaw devices list        # List paired/pending devices
npx openclaw devices list --json # Detailed list with requestIds
npx openclaw devices approve ID  # Approve a pending device


--- Health & Security ---

npx openclaw status              # Quick gateway status check
npx openclaw doctor              # Health check (may update config)
npx openclaw security audit --deep --fix  # Security audit with auto-fix


--- Configuration ---

npx openclaw onboard --install-daemon  # Run the setup wizard again
npx openclaw config set KEY VALUE      # Change a single setting
cat ~/.openclaw/openclaw.json          # View all config (find gateway token here)


--- Skills (ClawHub) ---

npx clawhub search KEYWORD       # Search for skills
npx clawhub install SKILL        # Install a skill
npx openclaw skills list         # List installed skills


============================================
  DONE! OpenClaw is installed and running.
============================================
