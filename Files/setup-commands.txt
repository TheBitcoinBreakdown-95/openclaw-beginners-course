============================================
  OpenClaw Module 02 — Setup Commands
  Copy and paste these into the right terminal
============================================

IMPORTANT: Open this file from your DOWNLOADS folder, not from the USB stick.
Copying commands from a USB drive may not paste correctly.

To paste in PowerShell: right-click OR press Ctrl+V
To paste in Ubuntu: right-click (this pastes automatically)

If paste stops working or you need to restart Ubuntu:
  Close the Ubuntu window, then reopen it using EITHER method:
  - Start Menu: type "Ubuntu" and click it
  - PowerShell: & 'C:\Program Files\WSL\wsl.exe' -d Ubuntu


============================
  POWERSHELL COMMANDS
  (Run as Admin: Start > type PowerShell > Ctrl + Shift + Enter)
============================


STEP 1: Enable WSL components
--------------------------------------------

& 'C:\Program Files\WSL\wsl.exe' --install --no-distribution

>>> RESTART YOUR COMPUTER NOW <<<
>>> After restarting, open PowerShell as Admin again <<<
>>> (Start > type PowerShell > Ctrl + Shift + Enter) <<<


STEP 2: Create the Ubuntu folder
--------------------------------------------

mkdir C:\WSL\Ubuntu


STEP 3: Import Ubuntu from your Downloads folder
--------------------------------------------

& 'C:\Program Files\WSL\wsl.exe' --import Ubuntu C:\WSL\Ubuntu "$env:USERPROFILE\Downloads\ubuntu-noble-wsl-amd64-wsl.rootfs.tar.gz"


STEP 4: Check that it worked
--------------------------------------------

& 'C:\Program Files\WSL\wsl.exe' -l -v

(You should see: Ubuntu, VERSION 2)


STEP 5: Open Ubuntu
--------------------------------------------

& 'C:\Program Files\WSL\wsl.exe' -d Ubuntu

(You should see a root@ prompt)


============================
  UBUNTU COMMANDS (in the root@ prompt)
  (Run these one at a time)
============================


STEP 6: Create your user account
--------------------------------------------

adduser openclaw

(Password won't show when you type — no dots, no stars. That's normal!)
(Skip optional fields like Full Name by pressing Enter)


STEP 7: Give your user admin rights
--------------------------------------------

usermod -aG sudo openclaw


STEP 8: Configure WSL settings
--------------------------------------------

echo -e "[boot]\nsystemd=true\n\n[user]\ndefault=openclaw" > /etc/wsl.conf


STEP 9: Exit and restart Ubuntu
--------------------------------------------

exit

(Now back in PowerShell, run these two commands:)

& 'C:\Program Files\WSL\wsl.exe' --shutdown

(Wait 5 seconds, then:)

& 'C:\Program Files\WSL\wsl.exe' -d Ubuntu

(You should now see openclaw@ instead of root@)


STEP 10: Verify systemd is running
--------------------------------------------

systemctl is-system-running

(Expected: "running" or "degraded" — both are OK)


STEP 11: Verify Start Menu shortcut
--------------------------------------------

(Ubuntu should already appear in the Start menu from the WSL installer.)
Type "ubuntu" in the Start menu to check. If it launches, skip to STEP 12.

If it does NOT appear, create one manually:
1. Press Win + R, type: shell:programs — press Enter
2. Right-click empty space > New > Shortcut
3. Paste this as the location:
   C:\Program Files\WSL\wsl.exe -d Ubuntu
4. Name it: Ubuntu
5. Click Finish


============================
  UBUNTU COMMANDS (as openclaw@ user)
  (Open Ubuntu from Start Menu)
============================


STEP 12: Update Ubuntu and install tools
--------------------------------------------

sudo apt update && sudo apt upgrade -y

(Then install essential tools:)

sudo apt install -y git curl wget build-essential


STEP 13: Install nvm (Node Version Manager)
--------------------------------------------

curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash

(Then activate it:)

source ~/.bashrc

(If that doesn't work: close the Ubuntu window, then reopen using either method:)
(  - Start Menu: type "Ubuntu" and click it)
(  - PowerShell: & 'C:\Program Files\WSL\wsl.exe' -d Ubuntu)
(Then continue from here.)

(Check it works:)

nvm --version

(Should show: 0.40.1)


STEP 14: Install Node.js 22
--------------------------------------------

(If paste isn't working, close the Ubuntu window, then reopen using either method:)
(  - Start Menu: type "Ubuntu" and click it)
(  - PowerShell: & 'C:\Program Files\WSL\wsl.exe' -d Ubuntu)

nvm install 22
nvm alias default 22

(Check it works:)

node --version
npm --version

(Should show: v22.x.x and 10.x.x)


============================
  POWER SETTINGS (back in Windows)
============================


STEP 15: Disable sleep
--------------------------------------------

(GUI — no commands needed)
1. Settings > System > Power & sleep
2. Set "Sleep" to NEVER (both battery and plugged in)


STEP 16: Disable lid close sleep
--------------------------------------------

(GUI — no commands needed)
1. Control Panel > Power Options > "Choose what closing the lid does"
2. Set "When I close the lid" to DO NOTHING (both battery and plugged in)
3. Click Save changes


STEP 17: Disable hibernate (PowerShell as Admin)
--------------------------------------------

powercfg /hibernate off


STEP 18: Verify everything works
--------------------------------------------

(In Ubuntu terminal, run:)

node --version
npm --version
git --version
curl --version
systemctl is-system-running
pwd

(All should return valid output. pwd should show /home/openclaw)


============================
  OPTIONAL: TAILSCALE (remote access)
  (Skip if you'll only use this laptop locally)
============================


STEP 19: Install Tailscale inside Ubuntu
--------------------------------------------

(In Ubuntu terminal, run:)

curl -fsSL https://tailscale.com/install.sh | sh

(Then start Tailscale:)

sudo tailscale up

(This gives you a URL — open it in your browser to authorize the device.)


STEP 20: Verify Tailscale
--------------------------------------------

tailscale status

(You should see your devices listed with Tailscale IPs like 100.x.x.x)

Access your OpenClaw later:
  - From this laptop: http://127.0.0.1:18789/
  - From your phone (on Tailscale): http://100.x.x.x:18789/
  - From everywhere else: no access (secure by default)

(Also install Tailscale on Windows: download from https://tailscale.com/download)
(Sign in with the same account you used above.)


============================================
  MODULE 03 — Installing OpenClaw
  (Everything below happens in Ubuntu terminal)
============================================


STEP 21: Install OpenClaw
--------------------------------------------

curl -fsSL https://openclaw.ai/install.sh | bash

(Wait for "Installation complete!" You will see npm WARN deprecated messages — ignore these, they are harmless.)


STEP 22: Run the onboarding wizard
--------------------------------------------

(The install may not add openclaw to your PATH. If "openclaw" gives "command not found", use npx instead:)

npx openclaw onboard --install-daemon

(If it says "Need to install the following packages" — type y and press Enter. This is normal.)
(Expect 1-3 minutes of downloading before the wizard appears. Be patient — it's not stuck.)
(If the terminal freezes or paste stops working after download, close Ubuntu and reopen from Start Menu, then run the npx command again.)

>>> IMPORTANT: When asked "Quick Setup" or "Manual" — choose MANUAL <<<
(Quick Setup skips questions we need to configure. Choose Manual so you see every option.)

(This starts an interactive wizard. Here's what to choose for each question:)

  Q1  Gateway type:          Local Gateway
  Q2  Workspace directory:   Accept default (~/.openclaw) — press Enter
  Q3  AI provider:           Anthropic (or your choice)
  Q4  API key:               Use the NOTEPAD TRICK (see below)
  Q5  Model:                 claude-opus-4-6
  Q6  Gateway port:          Accept default (18789) — press Enter
  Q7  Gateway bind:          Loopback
  Q8  Tailscale exposure:    Off
  Q9  Gateway token:         Leave blank (auto-generate) — press Enter
  Q10 Chat channels:         Skip for now
  Q11 Skills:                Skip all — press Enter
  Q12 Hooks:                 Enable BOOT.md and session memory (spacebar to toggle)
  Q13 Service runtime:       Node.js — press Enter
  Q14 Install as service:    Y — press Enter

>>> IF THE WIZARD SAYS "Gateway service already installed" <<<
Choose RESTART — it's already installed, just needs a fresh start.

>>> WHEN ASKED "How do you want to hatch your bot?" <<<
Choose "do this later" — we will test the TUI ourselves after setup.

>>> WHEN ASKED "Enable bash shell completion?" <<<
Choose Yes.

>>> THE NOTEPAD TRICK (for Q4 — API key) <<<
Browsers add hidden characters when copying. DO NOT paste directly into terminal.
1. Copy API key from console.anthropic.com
2. Paste into Notepad on Windows
3. Verify it's ONE line starting with sk-ant-
4. Select all (Ctrl+A), copy (Ctrl+C)
5. Right-click in Ubuntu terminal to paste

>>> TRANSFERRING YOUR API KEY FROM ANOTHER DEVICE <<<
If you created your API key on your phone or another computer:
- Easiest: email it to yourself, open the email on this laptop's browser, copy it
- Tailscale: right-click the key file > "Send with Tailscale..." > pick this laptop

>>> SAVE YOUR GATEWAY TOKEN <<<
The wizard displays a gateway token at the end. Save it immediately!
You need it to access the dashboard. If you lose it, look in:
cat ~/.openclaw/openclaw.json
(Search for the "token" field in the gateway section.)


STEP 23: Approve device pairing (if needed)
--------------------------------------------

(After onboarding, the TUI may require device pairing before it can connect.)
(If you see "pairing required" when trying to use the TUI or dashboard:)

npx openclaw devices list --json

(Find the "requestId" for the pending entry — a long string of letters and numbers.)
(Then approve it:)

npx openclaw devices approve YOUR-REQUEST-ID-HERE

(Replace YOUR-REQUEST-ID-HERE with the actual requestId from the JSON output.)
(After approving, try the TUI again — it should connect.)


STEP 24: Install QMD (do this immediately)
--------------------------------------------

npx clawhub install qmd

(If it says "Need to install the following packages: clawhub" — type y and press Enter.)
(If it asks for the slug and "qmd" doesn't work, try: npx clawhub search qmd — then use the slug it shows.)

npx openclaw gateway restart

(QMD is a search engine for your agent's memory — saves tokens from day one.)


STEP 25: Verify the installation
--------------------------------------------

npx openclaw status
npx openclaw doctor
npx openclaw security audit --deep --fix

(status should show "Running", doctor should pass, audit fixes file permissions.)
(If doctor asks to update config or restart, say Yes.)


STEP 26: Test the dashboard (optional — may not work on WSL)
--------------------------------------------

(The dashboard is a browser version of the TUI. It has a known auth bug on WSL.)
(If it doesn't work, don't worry — the TUI is the primary interface.)

(To try it, run this in Ubuntu:)

npx openclaw dashboard --no-open

(It prints a URL with your token. Copy the FULL URL and paste it into your Windows browser.)
(Use http:// NOT https:// — the S will cause an error.)
(If it says "auth failed" or "connect failed", skip it — use the TUI instead.)


STEP 27: Test the TUI (first chat)
--------------------------------------------

npx openclaw tui

(If you see "pairing required" — go back to STEP 23 and approve the device.)
(If you see "gateway connected" — you're in!)
(Type a short greeting and press Enter. If the AI responds, it works!)
(Type /exit or press Ctrl+C to leave.)


STEP 28: Verify the daemon
--------------------------------------------

npx openclaw gateway status

(Should show: Active: active (running))

(Close the Ubuntu window completely, wait 10 seconds, then reopen Ubuntu
from the Start Menu. Run: npx openclaw tui
If it connects, the daemon kept running in the background — that's the goal.)


============================
  USEFUL COMMANDS (reference)
============================


--- Gateway (daemon) ---

npx openclaw gateway start       # Start the daemon
npx openclaw gateway stop        # Stop the daemon
npx openclaw gateway restart     # Restart after config changes
npx openclaw gateway status      # Check if daemon is running
npx openclaw logs        # View daemon logs
npx openclaw gateway install     # Reinstall the daemon service


--- Chat & Dashboard ---

npx openclaw tui                 # Chat with your agent (primary interface)
npx openclaw dashboard --no-open # Get a tokenized URL for the browser dashboard


--- Device Management ---

npx openclaw devices list        # List paired/pending devices
npx openclaw devices list --json # Detailed list with requestIds
npx openclaw devices approve ID  # Approve a pending device


--- Health & Security ---

npx openclaw status              # Quick gateway status check
npx openclaw doctor              # Health check (may update config)
npx openclaw security audit --deep --fix  # Security audit with auto-fix


--- Configuration ---

npx openclaw onboard --install-daemon  # Run the setup wizard again
npx openclaw config set KEY VALUE      # Change a single setting
cat ~/.openclaw/openclaw.json          # View all config (find gateway token here)


--- Skills (ClawHub) ---

npx clawhub search KEYWORD       # Search for skills
npx clawhub install SKILL        # Install a skill
npx openclaw skills              # List installed skills


============================================
  DONE! OpenClaw is installed and running.
============================================
